[platformio]
default_envs = wokwi
include_dir = include

[env]
platform = espressif32
framework = arduino
monitor_speed = 115200
lib_deps = 
    knolleary/PubSubClient
    adafruit/Adafruit DHT Unified
    adafruit/DHT sensor library
    adafruit/Adafruit Unified Sensor
    claws/BH1750

# --- Environment for Wokwi Simulation ---
[env:wokwi]
board = esp32-c3-devkitm-1
build_flags =
    -D WOKWI_SIM=1
    -I include
    -D PIN_LED=8
    -D PIN_DHT=4
    -D PIN_LDR=1
    ; Wokwi doesn't use I2C for LDR, so pins are arbitrary
    -D PIN_SDA=0 
    -D PIN_SCL=0

# --- Environment for real ESP32-C3 ---
[env:esp32-c3-devkitm-1]
board = esp32-c3-devkitm-1
board_build.flash_mode = dio
lib_deps =
    ${env.lib_deps}
    tzapu/WiFiManager  ; <-- Fixed: Removed version pin
build_flags =
    -I include
    -D PIN_LED=8      ; ESP32-C3 DevKitM-1 built-in RGB LED is on GPIO 8
    -D PIN_DHT=4
    -D PIN_SDA=5      ; Default I2C SDA
    -D PIN_SCL=6      ; Default I2C SCL

# --- Environment for real Waveshare ESP32-S3 ---
[env:waveshare_esp32s3_nano]
board = waveshare_esp32s3_nano
lib_deps =
    ${env.lib_deps}
    tzapu/WiFiManager ; <-- Fixed: Removed version pin
build_flags =
    -I include
    -D PIN_LED=17     ; Waveshare ESP32-S3-Nano built-in LED is on GPIO 17
    -D PIN_DHT=4
    -D PIN_SDA=8      ; Default I2C SDA
    -D PIN_SCL=9      ; Default I2C SCL